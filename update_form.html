<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update Form</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <div class="container flex">
        <h1>UPDATE STATUS</h1>
        <form id="statusForm" class="flex-item;">
            <div class="flex-item">
                <label for="name" style="font-size: 1.2rem;">Name<abbr title="required" aria-label="required" aria-required="true">*</abbr></label>
                <input type="text" name="name" id="name" class="in" required>
            </div>
            <fieldset class="flex-item">
                <legend>Status<abbr title="required" aria-label="required" aria-required="true">*</abbr></legend>
                <p>
                    <label for="working">Working</label>
                    <input type="radio" name="status" value="working" required>                
                </p>
                <p>
                    <label for="notWorking">Not Working</label>
                    <input type="radio" name="status" value="notWorking">
                </p>
            </fieldset>
            <fieldset class="flex-item">
                <legend>Reason<abbr title="required" aria-label="required" aria-required="true">*</abbr></legend>
                <p>
                    <label for="noMoney">No money</label>
                    <input type="radio" name="reason" value="noMoney">    
                </p>
                <p>
                    <label for="noMoney">Maintenance</label>
                    <input type="radio" name="reason" value="maintenance">    
                </p>
                <p>
                    <label for="noMoney">Other</label>
                    <input type="radio" name="reason" value="other">    
                </p>
            </fieldset>
            <div class="flex-item">
                <label for="name" style="font-size: 1.2rem;">Submitted Time<abbr title="required" aria-label="required" aria-required="true">*</abbr></label>
                <input type="datetime-local" name="submitted" class="in" required>
            </div>
            <p id = "info" style="font-size: 0.9rem;" class="flex-item">Message to inform</p> 
            <input type="submit" value="Submit" action ="/upload" method = "POST" class = "submitButton" style="font-size: 1.5rem;" id="create">      
        </form>
    </div>
    
    <script>
        document.getElementsByTagName("fieldset")[0].addEventListener("click", reasonVisibile);
        //Check whether 'notWorking' is selected

        function reasonVisibile() {
        //display and set reason to required if notWorking is selected and removed them if it is not

            x = document.getElementsByTagName("fieldset")[0].getElementsByTagName("input")[1];

            if (x.checked){
                document.getElementsByTagName("fieldset")[1].style.display='flex';
                document.getElementsByTagName("input")[3].required = true;
            }
            else{
                document.getElementsByTagName("fieldset")[1].style.display='none';
                x.required = false;
            }
                
        }

    </script>
</body>
</html>